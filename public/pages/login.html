<!DOCTYPE html>
<html>
<body>
<h2>Login</h2>
<form id="f">
  <input id="email" required />
  <input id="password" type="password" required />
  <button>Login</button>
</form>
<p id="msg"></p>

<script>
f.onsubmit = async e => {
  e.preventDefault();
  const res = await fetch('/api/login', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({
      email: email.value,
      password: password.value
    })
  });

  const text = await res.text();
  try {
    const data = JSON.parse(text);
    localStorage.setItem('token', data.session.access_token);
    location.href = '/pages/profile.html';
  } catch {
    msg.textContent = text;
  }
};
</script>
</body>
</html>
