<!DOCTYPE html>
<html>
<body>
<h2>Profile</h2>
<button id="logout">Logout</button>
<button id="del">Delete Account</button>
<p id="msg"></p>

<script>
if (!localStorage.getItem('token')) {
  location.href = '/pages/login.html';
}

logout.onclick = () => {
  localStorage.removeItem('token');
  location.href = '/pages/login.html';
};

del.onclick = async () => {
  const email = prompt('Email to delete:');
  const res = await fetch('/api/delete-user', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({ email })
  });
  msg.textContent = await res.text();
};
</script>
</body>
</html>
