<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Profile</title>
</head>
<body>

  <h1>Profile</h1>

  <p id="userEmail">Email: loading...</p>
  <p id="userId">User ID: loading...</p>

  <button id="deleteBtn">Delete Account</button>

  <p id="msg"></p>

  <script type="module">
    const emailEl = document.getElementById('userEmail');
    const idEl = document.getElementById('userId');
    const deleteBtn = document.getElementById('deleteBtn');
    const msg = document.getElementById('msg');

    // TEMP SAFE DATA â€” NO BROKEN API
    emailEl.textContent = 'Email: sandbox@test.com';
    idEl.textContent = 'User ID: sandbox';

    deleteBtn.addEventListener('click', async () => {
      msg.textContent = '';

      try {
        const res = await fetch('/api/delete-user', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email: 'sandbox@test.com' })
        });

        const text = await res.text();
        const data = JSON.parse(text);

        msg.textContent = data.message || data.error || 'Unknown response';
      } catch {
        msg.textContent = 'Delete failed (server error)';
      }
    });
  </script>

</body>
</html>
